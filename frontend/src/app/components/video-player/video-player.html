<div class="video-player-container">
  <div class="video-wrapper">
    <video
      #videoElement
      class="video-element"
      autoplay
      playsinline
      muted
      controls
    ></video>

    <div class="video-overlay" *ngIf="!isConnected">
      <div class="overlay-content">
        <div *ngIf="isConnecting" class="loading">
          <div class="spinner"></div>
          <p>Подключение к потоку...</p>
        </div>

        <div *ngIf="!isConnecting && !isConnected && !errorMessage" class="ready">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="10" stroke-width="2"/>
            <polygon points="10 8 16 12 10 16 10 8" fill="currentColor"/>
          </svg>
          <p>Нажмите "Подключить" для просмотра</p>
        </div>

        <div *ngIf="errorMessage" class="error">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="10" stroke-width="2"/>
            <line x1="15" y1="9" x2="9" y2="15" stroke-width="2"/>
            <line x1="9" y1="9" x2="15" y2="15" stroke-width="2"/>
          </svg>
          <p>Ошибка: {{ errorMessage }}</p>
        </div>
      </div>
    </div>
  </div>

  <div class="controls">
    <button
      *ngIf="!isConnected"
      (click)="connect()"
      [disabled]="isConnecting"
      class="btn btn-primary"
    >
      {{ isConnecting ? 'Подключение...' : 'Подключить' }}
    </button>

    <button
      *ngIf="isConnected"
      (click)="disconnect()"
      class="btn btn-danger"
    >
      Отключить
    </button>

    <button
      *ngIf="isConnected || errorMessage"
      (click)="reconnect()"
      class="btn btn-secondary"
    >
      Переподключить
    </button>
  </div>

  <div class="stream-info">
    <p><strong>Поток:</strong> {{ streamName }}</p>
    <p><strong>Статус:</strong>
      <span [class.status-connected]="isConnected"
            [class.status-disconnected]="!isConnected && !isConnecting"
            [class.status-connecting]="isConnecting">
        {{ isConnecting ? 'Подключение...' : (isConnected ? 'Подключено' : 'Отключено') }}
      </span>
    </p>
  </div>
</div>
